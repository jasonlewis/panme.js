(function(a){a.fn.panme=function(b){var c=a.extend({},a.fn.panme.defaults,b);this.each(function(){function i(a){var b={x:a.clientX-e.start.x,y:a.clientY-e.start.y};if(f){var h={x:true,y:true};if(e.prev.x+b.x>=0){h.x=false}if((e.prev.x+b.x)*-1>d.real.width-c.width){h.x=false}if(h.x){e.now.x=e.prev.x+b.x}if(e.prev.y+b.y>=0){h.y=false}if((e.prev.y+b.y)*-1>d.real.height-c.height){h.y=false}if(h.y){e.now.y=e.prev.y+b.y}g.css({backgroundPosition:e.now.x.toString()+"px "+e.now.y.toString()+"px"})}}function h(){g=b.next(".panme");b.hide();g.css({width:c.width,height:c.height,display:"inline-block",background:"url("+b.attr("src")+") no-repeat "+(c.startX?c.startX*-1:0)+"px "+(c.startY?c.startY*-1:0)+"px"});d.original.width=b.width();d.original.height=b.height();b.removeAttr("width").removeAttr("height");d.real.width=b.width();d.real.height=b.height();b.width(d.original.width).height(d.original.height);g.bind({mousedown:function(a){a.preventDefault();f=true;e.start.x=c.startX>0?c.startX+a.clientX:a.clientX;e.start.y=c.startY>0?c.startY+a.clientY:a.clientY;c.startX=0;c.startY=0},mousemove:i,mouseup:function(a){i(a);f=false;e.prev.x=e.now.x;e.prev.y=e.now.y}})}var b=a(this),d={real:{width:0,height:0},original:{width:0,height:0}},e={start:{x:0,y:0},prev:{x:0,y:0},now:{x:0,y:0}},f=false,g;b.after('<div class="panme"></div>');b.get(0).complete?h():b.load(h)});return a(this).next(".panme")};a.fn.panme.defaults={width:500,height:500,startX:0,startY:0}})(jQuery)